<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>정정게시판</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #FFF;
            margin: 0;
            padding: 0;
        }

        header {
            background: linear-gradient(90deg, #5b5fc7, #6B2399);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .header-left img {
            width: 50px;
            height: 50px;
            margin-right: 20px;
        }

        .header-left h1 {
            font-size: 50px;
            color: #FFF;
            margin: 0;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .header-right span {
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }

        .header-right button {
            background-color: white;
            color: #333;
            font-size: 16px;
            font-weight: bold;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 10px 20px;
            cursor: pointer;
        }

        .header-right button:hover {
            background-color: #f1f1f1;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="/css/boardDetail.css" />
</head>
<body>
<header>
    <div class="header-left">
        <img src="/img/mate-icon.png" alt="Mate Logo">
        <h1>정정게시판</h1>
    </div>
    <div class="header-right">
        <span>{{userName}}님 반갑습니다.</span>
        <button>마이페이지</button>
        <button>정정게시판</button>
        <form action="/signOut" method="post" style="display:inline;">
            <button type="submit" class="nav-button">로그아웃</button>
        </form>
    </div>
</header>
<div class="container">
    {{#feedback}} <!-- /user/userFix/detail 시 보이는 form -->
    <form>
        <input type="hidden" name="userId" value="{{userId}}">
        <div class="read-group">
            <label for="title">제목</label>
            <input type="text" id="title" name="title" value="{{title}}" readonly>
        </div>
        <div class="read-group">
            <label for="dateInput">기간</label>
            <input id="dateInput" type="text" value="{{createdAt}}" name="createdAt" readonly>
        </div>
        <div class="read-group">
            <label for="toxicitySpeechLog">독성발언 조회</label>
            <input type="text" id="toxicitySpeechLog" name="toxicitySpeechLog" value="{{toxicitySpeechLog}}" readonly>
        </div>
        <div class="read-file-upload">
            <label for="filepath_read">첨부 파일</label>
            <input type="text" id="filepath_read" name="filepath_read" value="{{filepath}}" readonly>
        </div>
        <div class="read-group">
            <label for="content">내용</label>
            <textarea id="content" rows="6" name="content" readonly>{{content}}</textarea>
        </div>
        <div class="btnArea">
            <button onclick="goback()" id="backbtn" type="button" class="submit-btn">뒤로가기</button>
        </div>
    </form>
    {{/feedback}}
    {{^feedback}} <!-- /user/userFix/write 시 보이는 form -->
    <form action="../userFix/write" method="post" enctype="multipart/form-data">
        <input type="hidden" name="userId" value="{{userId}}">
        <div class="form-group">
            <label for="title">제목</label>
            <input type="text" id="title" name="title" placeholder="제목을 입력하세요">
        </div>
        <div class="form-group">
            <label for="date-range">기간</label>
            <input id="date-range" type="date" name="createdAt">
        </div>
        <div class="form-group">
            <label for="toxicityId">독성발언 조회</label>
            <input type="text" id="toxicityId" name="toxicityId" placeholder="독성발언을 선택하세요">
            <button type="button" class="search-btn">조회</button>
        </div>
        <div class="file-upload">
            <label for="filepath">첨부 파일</label>
            <input type="file" id="filepath" name="filepath">
        </div>
        <div class="form-group">
            <label for="content">내용</label>
            <textarea id="content" rows="6" name="content" placeholder="내용을 입력하세요"></textarea>
        </div>
        <div class="btnArea">
            <button id="submitBtn" type="submit" class="submit-btn">제출하기</button>
            <button id="backBtn" onclick="goback()" type="button" class="submit-btn">뒤로가기</button>
        </div>
    </form>
    {{/feedback}}
</div>
</body>
<script>
    //userFix/detail js
    document.addEventListener("DOMContentLoaded", function() {
        //날짜 값 형식 변경
        const inputElement = document.getElementById("dateInput");
        if (inputElement && inputElement.value) {
            const formattedDate = inputElement.value.replace("T", " "); // "2025-01-30 16:23:38"
            inputElement.value = formattedDate; // 변환된 값으로 설정
        }

        //filepath빈값일 시 대체문구
        const filepath = document.getElementById("filepath_read");
        if (filepath) {
            if (filepath.value.trim() === "") {
                filepath.value = "업로드된 첨부파일이 없음";
            }
        }
    });

    function goback(){
        window.location.href = "/user/userFix";
    }
</script>
</html>
